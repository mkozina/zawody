<h1>Zmodyfikuj dane zawodów</h1>

<p>Wprowadź nowe dane aby zmodyfikować informacje o zawodach:</p>

<form class="form" action="/ucontest" method="post">

<input type="text" name="name" value="<%= contest.name %>" placeholder="Nazwa zawodów" />

<p>Punktacja:
	<select name="scores">
		<option value="ten"
			<% if (contest.scores == "ten") { %> selected <% } %>>0...10</option>
		<option value="twenty"
			<% if (contest.scores == "twenty") { %> selected <% } %>>0...20</option>
	</select>
	<div class="radio">
		<input type="radio" name="granulation" value="full"
			<% if (contest.granulation == "full") { %> checked <% } %>> tylko całe punkty
	</div>
	<div class="radio">
		<input type="radio" name="granulation" value="half"
			<% if (contest.granulation == "half") { %> checked <% } %>> połówki punktów
	</div>
</p>

<input type="text" name="noref" value="<%= contest.noref %>" placeholder="Liczba sędziów w grupach" />

<input type="date" name="dateofcontest"
	value="<%= contest.dateofcontest.getFullYear() + '-' + 
	('0' + (contest.dateofcontest.getMonth()+1)).slice(-2) + '-' + 
	('0' + contest.dateofcontest.getDate()).slice(-2) %>" placeholder="Data zwodów" />

<p>
	<select id="addcontestant" name="list" multiple>
		<% contestants.forEach(function(contestant) { %>
		<option value="<%= contestant.name %>"><%= contestant.name %></option>
		<% }); %>
	</select>
	<button id="add" type="button">Add</button>
</p>
<p>
	Lista startowa:
	<div id="startinglist"></div>
</p>


<div class="buttons">
	<button type="submit">Submit</button>
	<a href="/lcontest"><button type="button">Cancel</button></a>
</div>
</form>

<script src="jquery.min.js"></script>
<script src='/js/ucontest.js'></script>

<script>
$( document ).ready(function() {

	<% contest.startinglist.forEach(function(contestant) { %>
		var newObj = new Obj(<%= contestant.no %>, "<%= contestant.name %>");
		arr[i] = newObj;
		i++;
		no = <%= contestant.no %>;
	<% }); %>
	no++;

	$.each(arr, function(index, value) {
		newHTML.push('<ul>');
    	newHTML.push(
		'<li>' +
		value.no + '. ' + value.name +
		'<button class="del" type="button" value="' + value.no + '">Remove</button>' +
		'</li>');
		newHTML.push('</ul>');
	});
	$("#startinglist").html(newHTML.join(""));
	newHTML = [];

});
</script>
